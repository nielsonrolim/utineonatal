<%- model_class = Indicator -%>
<div class="page-header">
  <h1><%= t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>

<% @main_categories.each do |main_category| %>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><%= main_category.name %></h3>
      </div>
      <div class="panel-body">

        <% main_category.children.order(:name).each do |category| %>
            <div class="panel panel-default">
              <div class="panel-heading"><%= category.name %></div>
              <div class="panel-body">
                <table class="table table-striped">
                  <thead>
                  <tr>
                    <th><%= model_class.human_attribute_name(:id) %></th>
                    <th>Indicador</th>
                    <th><%= model_class.human_attribute_name(:has_obs) %></th>
                    <th><%= model_class.human_attribute_name(:obs_description) %></th>
                    <th class="acoes"><%= t '.actions', :default => t("helpers.actions") %></th>
                  </tr>
                  </thead>
                  <tbody>
                  <% category.indicators.order(:name).each do |indicator| %>
                      <tr>
                        <td><%= link_to indicator.id, indicator_path(indicator) %></td>
                        <td><%= indicator.name %></td>
                        <td><%= (indicator.has_obs) ? 'Sim' : 'NÃ£o' %></td>
                        <td><%= indicator.obs_description %></td>
                        <td class="acoes">
                          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                                      edit_indicator_path(indicator), :class => 'btn btn-default btn-xs' %>
                          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                                      indicator_path(indicator),
                                      :method => :delete,
                                      :data => {:confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?'))},
                                      :class => 'btn btn-xs btn-danger' %>
                        </td>
                      </tr>
                  <% end %>

                  </tbody>
                </table>
              </div>
            </div>

        <% end %>

      </div>
    </div>
<% end %>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_indicator_path,
            :class => 'btn btn-primary' %>
